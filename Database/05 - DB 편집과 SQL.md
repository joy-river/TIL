### Modifying DB
---
* 데이터베이스를 편집하는 연산은 총 3개가 있다.

    # Deletion (-)
    ---
    > $ r \leftarrow r - E$
    
    * E라는 쿼리를 r에서 지워버리고, r에 다시 할당한다.

    # Insertion ($\cup$)
    ---
    > $ r \leftarrow r \cup E $

    * E라는 쿼리를 r에 추가하라.

    * 관계 모델은 중복을 허용하지 않으나, SQL은 Multi-set을 채용하므로 중복을 가질 수 있다.
        
        * 당연히 E는 집합, 관계여야한다. {} 내부에 순서쌍을 추가할 수 있다.

            > $instructor \leftarrow instuctor \cup {("1234", "smith", "Computer Science", "1200")}$

            * 이때 순서쌍을 Constant Relation이라고 한다.

    # Updating
    ---
    > $r \leftarrow \Pi_{F1,F2,F3..}(r)$

    * 레코드를 빼고 넣어라, 차집합 후 합집합으로도 가능하다.

        * Generalized Projection을 통해서도 수행할 수 있다.

            * 주로 숫자만 바꾸면 될 때 사용가능하다.

### 동치 쿼리(Equivalent Queries)
---
* 똑같은 관계 대수를 여러 방법으로 표현할 수 있다. 이를 동치되는 쿼리라고 한다.

    * 동치되는 쿼리는 동일한 결과를 내지만, 실행되는 시간은 다를 수 있다.

    * DBMS는 동치 쿼리 중에서 가장 빠른 쿼리를 찾아낸다.

        * SQL은 declarative한 언어이기 때문이다.

### 관계 대수(Relational Algebra)
---
* 관계 대수란 DB나 상수 관계를 가지고 연산하는 또 다른 관계라고 정리할 수 있다.

    * 따라서 관계 대수 식 자체도 또 다른 관계 대수로 엮일 수 있다.

* 관계 대수는 원하는 값을 찾아내는 모든 과정을 식으로 설명하는 것이다.

    * Relational Calculus(관계 해석)은 관계 대수와는 달리 원하는 값에 대한 조건만을 제시한다.

* Basic 연산자만 사용해서 문제를 푸는 연습을 하는 것도 중요하다.

    > 대학에서 제일 높은 급여를 받는 사람을 구하라.

    1. 교수 테이블의 급여만을 뽑고 복사, 이름을 d라고 지정한다.

    2. 교수 급여 테이블과 d를 곱한다.

    3. 그 중 오른쪽이 왼쪽보다 큰 튜플만을 고르고,

    4. 왼쪽 칼럼만 떼어낸다.

    5. 원본 교수 급여 테이블에 4에서 만든 테이블을 뺀다.

* 우리는 앞으로 관계 대수와 해석을 합쳐 만든 SQL을 배우게 된다.

### SQL 입문
---
* Ted Codd가 관계 모델을 만들고, 이를 IBM에서 상용화한 것이 System-R이다.

    * 여기서 사용한 언어가 바로 Sequel이고, 이것이 후에 SQL이 된다.

* ANSI와 ISO가 SQL에 대한 표준을 지정하지만, 유명무실하다.

    * 시장과 동떨어진 모든 DBMS가 지원하는 것들만 표준에 들어간다.

    * 현재 Relational DBMS를 만드는 회사가 거의 없어졌다.

* SQL을 굳이 몇개의 카테고리로 나누자면 4가지 정도가 있으나 큰 의미는 없다.

    1. DDL

        * 스키마를 정의하는데 사용한다.

            * 각 속성에 들어갈 수 있는 값이 현실에 존재함을 반영해야한다.

                * 속성마다 적절한 값이 들어갈 수 있게 해야한다.

            * 스키마들 사이의 관계를 적절히 정해야한다.(고유 키, 외래 키 등)

                * 참조 제약도 여기서 나오게 된다.

            * 인덱스(색인)을 통한 데이터의 빠른 접근을 정의한다.

            * 보안과 특정 데이터에 접근할 수 있는 권한을 정의한다.

            * 디스크에서 특정 관계가 물리적 장치에 저장되게 한다.

    2. DML

        * 데이터를 편집하는데 사용한다.

    3. DCL

        * 컨트롤을 위한 것이다.

    4. Embedded SQL and Dynamic SQL

        * 일반적 프로그래밍 언어로 SQL 문을 임베드하는 방법을 정의한다.
